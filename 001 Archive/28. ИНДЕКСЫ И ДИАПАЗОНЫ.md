---
tags:
  - csharp
  - массив
  - структуры
date: 2025-05-22
---
[# ИНДЕКСЫ И ДИАПАЗОНЫ В C#8 | C# ОТ НОВИЧКА К ПРОФЕССИОНАЛУ | УРОК # 28](https://www.youtube.com/watch?v=SqP_osnZJqo&list=PLQOaTSbfxUtD6kMmAYc8Fooqya3pjLs1N&index=40)

>Индексы и диапазоны помогают работать с массивами строками и частично с листом.

>Индексы и диапазоны введены и работают только на .Net Core C#8

Пример: у нас есть массив, нам нужно взять его последний элемент, но мы не знаем сколько в массиве. Чтобы вызвать последний элемент не зависимо от размера  мы будем писать так :

```csharp
int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };

Console.WriteLine(myArray[myArray.Length-1]);
```

C помощью индексов мы можем вместо `myArray.Length-1` написать просто `^1`, что значит "первый с конца"

```csharp
int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };

Console.WriteLine(myArray[^1]);
```

Обратить внимание, что с конца нумерация начинается с 1 а не с 0.

Эта функция удобно работает с диапазонами.

>Задача диапазона  - извлечь диапазон элементов из одного массива в другой

```csharp
int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };

int[] myArray2 = myArray[1..4];//Синтаксис диапазона в [от 1 до 4 не вкл]!!! 
```

То есть мы создали другой массив где будет переменная с индексом 1 - 3, используя диапазон

Таким образом полученный массив выглядит так `{2, 51, 5643}`

Если мы хотим указать последовательность от начала и до какого то момента, то это выглядит так:
```csharp
int[] myArray2 = myArray[..4];//означает до 4 но не включительно
```

```csharp
int[] myArray2 = myArray[5..]; // от пятого и до конца
```

## Что на самом деле представляют индексы и диапазоны?

### 1)Индексы

Индекс это на самом деле структура которая называется индекс, если навести мышь это можно увидеть
![[Pasted image 20250523000152.png]]

Как индекс выглядит, если мы создадим его сами:
```csharp
Index myIndex = ^2; // второй с конца
```

Это тоже тип данных как и `int` или `string` но более сложный тк это структура. Он тоже принимает значения.

```csharp
int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };

Console.WriteLine(myArray[^2]);//сюда мы можем вставить наш индекс
```

```csharp
Index myIndex = ^2;

int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };//

Console.WriteLine(myArray[myIndex]);
```

Индекс тоже имеет поля и методы
`myIndex.Value` `myIndex.IsFromEnd`

Выводим на консоль эти поля поля
```csharp
Index myIndex = ^1;

Console.WriteLine($" value {myIndex.Value} isFromEnd{myIndex.IsFromEnd}");
```

![[Pasted image 20250523001642.png]]

`Value` это индекс который мы будем брать, а `isFromEnd` это `bool` который говорит с конца индекс или нет.
```csharp
int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };

Console.WriteLine(myArray[^1]);
```

То есть когда мы пишем индекс в квадратных скобках, массив увидит
- Мы должны взять первое число
- Мы должны взять его с конца (^означает с конца)

Создаем индекс углубленно
```csharp
Index myIndex = new Index(3, true);
```
![[Pasted image 20250523002334.png]]
Как видно он принимает 2 значения:
		1е это `int`
		 2е это `bool` с конца или нет

### 2) Диапазоны

Диапазоны это тоже структура

```csharp
Range myRange = 1..4;
```

```csharp
int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };

int[] myArray2 = myArray[myRange];//Можем вставить сюда
```

Если мы будем создавать `Range` то увидим, что он потребляет **2 индекса**, начало и конец.
```csharp
Range myRange = new Range(1,4);//start и end
```
![[Pasted image 20250523003440.png]]
А индексы имеют в себе 2 параметра `value` и `isFromEnd`.

И мы можем писать параметры `Range` как индексы

```csharp
Range myRange = ^4..^1;// 4 с конца -> 1 с конца

int[] myArray = { 1, 2, 51, 5643, 32, 6, 10 };

int[] myArray2 = myArray[myRange];
```

### Работа со строками

```csharp
string str = "Hello world"
```

Строка это **массив** букв `'char'` , и мы можем указывать индексы этих букв.

```csharp
string str = "Hello world"
Console.Writeline(Str[0]);// первая буква
```

```csharp
string str = "Hello world"
Console.Writeline(Str[^1]);// первая буква с конца
```

```csharp
string str = "Hello world"
Console.Writeline(Str[0..5]);// слово Hello
```
