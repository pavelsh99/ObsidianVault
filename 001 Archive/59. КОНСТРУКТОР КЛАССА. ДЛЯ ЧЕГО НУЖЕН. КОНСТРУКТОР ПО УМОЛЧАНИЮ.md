---
tags:
  - csharp
  - ООП
  - инкапсуляция
date: 2025-10-23
---
[Что такое конструктор класса c# | для чего он нужен | конструктор по умолчанию си шарп | Урок # 59](https://www.youtube.com/watch?v=4z9vkieAyfM&list=PLQOaTSbfxUtD6kMmAYc8Fooqya3pjLs1N&index=80)
# Что такое конструктор класса?

> Конструктор класса это специальный метод класса, который вызывается при создании объекта такого класса при помощи #ключевое_слово `new` .

```csharp
class Gun

static void Main(string[] args)
{
    Gun gun = new Gun();  // ТУТ  
    gun.Shoot();
}
```

> Можно написать свой конструктор внутри класса

>Он позволяет сконфигурировать объект класса определенным образом, например сделать "пушку" не заряженной сразу при ее создании.

# Синтаксис конструктора класса и удобный снипет 

Cинтаксис:
```c#
public Gun()
{
	
}
```

Снипет:
- Вводим `ctor`

![[Pasted image 20251023120154.png]]

- Нажимаем `TAB`

![[Pasted image 20251023120412.png]]

- ВУАЛЯ 


# Конструктор по умолчанию используется даже если мы его не прописываем

![[Pasted image 20251023120552.png]]

> Тут конструктор пустой, но ссылка всё равно есть. Значит - он используется.
> Вызывается он  ключевым словом`new`

> Модификатор доступа конструктора должен всегда быть `public`, что бы мы могли использовать его при создании объекта класса.

>При этом мы не можем обратиться к конструктору через объект класса, потому что это специальный метод



# Пример

```csharp
class Gun
{
    public Gun()
    {
        isLoaded = true; // ТУт
        ammo = 10;
    }
}

    static void Main(string[] args)
{
    Gun gun = new Gun();
    gun.Shoot();
}
```

> Новый объект пушки будет иметь 10 выстрелов и начнет стрелять сразу после вызова метода.

(Весь код программы)
```csharp
class Gun
{
    private bool isLoaded;
    private int ammo;

    public Gun()
    {
        isLoaded = true; // ТУт
        ammo = 10;
    }

    private void Bang()
    {
        Console.WriteLine("БАХ!");
        Console.Beep(200, 100);
        Console.Beep(400, 50);
        Console.Beep(100, 200);
    }

    private void CheckAmmo()
    {
        if (ammo == 0)
        {
            Console.WriteLine("Введите количество боеприпасов:");
            while (!int.TryParse(Console.ReadLine(), out ammo) || ammo <= 0)
            {
                Console.WriteLine("Повторите попытку ввода!");
            }
        }
    }

    public void Shoot()
    {
        CheckAmmo();

        for (int i = 0; i < ammo; i++)
        {
            if (!isLoaded)
                Reload();

            Console.WriteLine("Выстрел");
            Bang();
            isLoaded = false;
        }

        ammo = 0;
    }

    private void Reload()
    {
        if (!isLoaded)
        {
            Console.WriteLine("Перезарядка");
            isLoaded = true;
        }
    }
}

static void Main(string[] args)
{
    Gun gun = new Gun();
    gun.Shoot();
}
```

# При чем тут инкапсуляция?

>Суть инкапсуляции, чтобы давать возможность изменять состояния и поведения через методы класса.

>Конструктор как раз таки позволяет менять поля объекта класса, внутри, сохраняя инкапсуляцию.

> Еще мы можем вызвать методы в конструкторе 
```csharp
            public Gun()
            {
                Shoot();
            }
            
        static void Main(string[] args)
        {
            Gun gun = new Gun();
            // НЕ НУЖНО gun.Shoot();
        }
```
> То есть мы вызвали метод, Сразу при создании объекта
> Пушка начнет работать сразу после создания

# Конструктор с параметрами

> Мы можем дать возможность выбора состояний при создании объекта класса


> Например, мы можем дать выбор, заряжена ли пушка и сколько в ней патронов.
```csharp
	class Gun
	{
        public Gun(bool isLoaded,int ammo)
        {
	          
        }
    }
    static void Main(string[] args)
{
    Gun gun = new Gun(isLoaded: true, ammo: 10);
    gun.Shoot();
}
```

// Кроме того тут использованы [[48. ИМЕНОВАННЫЕ ПАРАМЕТРЫ.]]

> Теперь при создании объекта мы обязаны указать параметры
> ![[Pasted image 20251023124355.png]]

>Но метод просто принял эти параметры, но ничего не сделал

```csharp
            public Gun(bool isLoaded,int ammo)
            {
                _isLoaded = isLoaded;
                _ammo = ammo;
            }
```

> `private` переменные часто переименовываются  так чтобы избежать противоречия: `_name`

> Его можно обойти еще с помощью  #ключевое_слово  `this`, но об этом в другом уроке

```csharp
            public Gun(bool isLoaded,int ammo)
            {
                this.isLoaded = isLoaded;
                this.ammo = ammo;
            }
```






