---
tags:
  - csharp
  - ключевое_слово
  - ООП
date:
---
[# C# статические поля класса | как работает ключевое слово static | C# ОТ НОВИЧКА К ПРОФЕССИОНАЛУ # 63](https://www.youtube.com/watch?v=uvBeW5HIU9I)
# Где используется `static`

>  Применяется к полям, свойствам, методам, конструкторам класса.

# Обычные поля класса vs `static` поля

## Пример обычных полей

```csharp
        class MyClass
        {
            public int a;
        }
        static void Main(string[] args)
        {
            MyClass myClass1 = new MyClass();

            myClass1.a = 3;

            MyClass myClass2 = new MyClass();

            myClass2.a = 75;

        }
```

> У нас есть:
> 	
> 	1) `MyClass` с полем `int a`
> 	
> 	2) В `Main` 2 экземпляра класса `MyClass1` и `MyClass2`
> 	
> 	3) Поле `a` у `MyClass1` = `3`
> 	
h> 	4) Поле `a` у `MyClass2` = `75`

![[Pasted image 20251031131359.png]]

>**Каждый экземпляр класса имеет ==свою, отдельную, не связанную область== памяти в управляемой куче, где хранятся данные**

##  Пример `static` полей.
```csharp
        class MyClass
        {
            public int a;

            public static int b; // Добавили поле b
        }
```

```csharp
        static void Main(string[] args)
        {
            MyClass myClass1 = new MyClass();
            myClass1.a = 3;

            MyClass myClass2 = new MyClass();
            myClass2.a = 75;

			MyClass.b = 10; // тут
        }
```

> Если мы присваиваем `static` какому то полю, то память для всех объектов класса для этого поля будет одинаковой.

> То есть `static int b` будет в единой области памяти.

> Более того, для работы с переменной `static` нет необходимости создавать объект класса

# Как работать со `static` полями

## 1) ПЕРВЫЙ МОМЕНТ

```csharp
        class MyClass
        {
            public int a;

            public static int b; // Добавили поле b
        }
```

> Мы не можем получить доступ к `static` полю на уровне экземпляра класса

![[Pasted image 20251031133852.png]]

> Но мы можем получить доступ к `static` полю на уровне всего класса.

![[Pasted image 20251031134031.png]]

## ВТОРОЙ МОМЕНТ

```csharp
        static void Main(string[] args)
        {
            MyClass myClass1 = new MyClass();
            myClass1.a = 3;

            MyClass myClass2 = new MyClass();
            myClass2.a = 75;

			MyClass.b = 10; 
        }
```

> У статического поля данные хранятся на уровне Класса, а не экземпляра класса.

> `static` поле будет общим для всех экземпляров класса см картинку

![[Pasted image 20251031134917.png]]

# `static` поле и методы класса

```csharp
        class MyClass
        {
            public static int b;

            public void SetB(int b)
            {
                MyClass.b = b;
            }
            
            public void PrintB()
            {
                Console.WriteLine(b);
            }
        }
        static void Main(string[] args)
        {
   
            MyClass myClass = new MyClass();
            myClass.SetB(37);

            myClass.PrintB();

        }
```

## Особенность 

```csharp
class MyClass
{
	public static int b;
	
	public void SetB(int b)
	{
    MyClass.b = b; /
	}
}
```

> Чтобы избежать однозначности: ![[Pasted image 20251031135943.png]]
> Мы используем не `this.b = b;` как в этом уроке [[61. КЛЮЧЕВОЕ СЛОВО THIS. THIS В КОНСТРУКТОРЕ]], а обращаемся к классу напрямую `MyClass.b = b;`
>
>	Потому что `this` ссылается к экземпляру класса, но `static` переменная создается на уровне самого класса, и она не привязана к какому либо конкретному экземпляру класса.
> ![[Pasted image 20251031140339.png]]

# Модификаторы доступа и поля `static`

> Поменяем модификатор `b` на `private`.

```csharp 
class MyClass
{
    private static int b;
}
```

> теперь в `Main` мы не можем напрямую взаимодействовать с полем `b`
> ![[Pasted image 20251031140904.png]] 


# `static` поля и разделяемая память или экземпляры класса


```csharp
        class MyClass
        {
            private static int b;

            public void SetB(int b)
            {
                MyClass.b = b;
            }
            
            public void PrintB()
            {
                Console.WriteLine(b);
            }
        }
```

> `static` поле общее для всех экземпляров класса, так что, используя методы, можно обращаться к статическому полю из разных экземпляров.

```csharp
        static void Main(string[] args)
        {

            MyClass myClass1 = new MyClass();
            myClass1.SetB(37);

            MyClass myClass2 = new MyClass();
            myClass2.PrintB();

        }
```
