---
tags:
  - csharp
  - –∫–ª—é—á–µ–≤–æ–µ_—Å–ª–æ–≤–æ
date: 2025-06-07
---
[–ö–õ–Æ–ß–ï–í–û–ï –°–õ–û–í–û REF C# | C# ref —á—Ç–æ —ç—Ç–æ –∏ –¥–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–æ | C# –û–¢ –ù–û–í–ò–ß–ö–ê –ö –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–£ | # 43](–ö–õ–Æ–ß–ï–í–û–ï –°–õ–û–í–û REF C# | C# ref —á—Ç–æ —ç—Ç–æ –∏ –¥–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–æ | C# –û–¢ –ù–û–í–ò–ß–ö–ê –ö –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–£ | # 43)

`ref` ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ —Å—Å—ã–ª–∫–µ**, –∞ –Ω–µ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é.

`ref` ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –¥–∞—Ç—å –º–µ—Ç–æ–¥—É **–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π**, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ **–∏–∑–º–µ–Ω–∏—Ç—å –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ**.

```csharp
        static void Foo(int a)
        {
            a = - 5;
        }

        static void Main(string[] args)
        {
            int a = 2;

            Foo(a);

            Console.WriteLine(a);
        }
```

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —à–∞–≥ –∑–∞ —à–∞–≥–æ–º:

### 1. `int a = 2;`

- –°–æ–∑–¥–∞—ë—Ç—Å—è  –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `a`, –≤ **—Å—Ç–µ–∫–µ (Stack)** ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ **2**.


### 2. `Foo(a);`

- –ú–µ—Ç–æ–¥ `Foo` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ:

- **–ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ö–û–ü–ò–Ø –∑–Ω–∞—á–µ–Ω–∏—è `a`**, —Ç.–µ. `2`

- –í–Ω—É—Ç—Ä–∏ `Foo(int a)` ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è **–Ω–æ–≤–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `a`**, –æ–Ω–∞ **–ù–ï –°–í–Ø–ó–ê–ù–ê** —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ `Main`

- `a` –≤ `Main` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è **–ø–æ –∑–Ω–∞—á–µ–Ω–∏—é**.

- –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: **–≤ `Foo` —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è-–∫–æ–ø–∏—è**, –∏ –µ—ë –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª –≤ `Main`.


### 3. –í `Foo`:

```csharp
a = -5;
```

- –ú–µ–Ω—è–µ—Ç—Å—è **–∫–æ–ø–∏—è**, –∞ –Ω–µ –æ—Ä–∏–≥–∏–Ω–∞–ª ‚Äî —ç—Ç–æ –≤–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `Foo`.

### 4. –í–æ–∑–≤—Ä–∞—Ç –≤ `Main`:

```csharp
Console.WriteLine(a);
```

- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `a` –∏–∑ `Main` **–Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å**, –≤—Å—ë –µ—â—ë **2**, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –º–µ—Ç–æ–¥–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å **–∫–æ–ø–∏–µ–π**.


```csharp
static void Foo(ref int a)
{
    a = -5;
}

static void Main(string[] args)
{
    int a = 2;
    Foo(ref a);
    Console.WriteLine(a); // –¢–µ–ø–µ—Ä—å –±—É–¥–µ—Ç -5
}
```

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—à–∞–≥–æ–≤–æ

### 1. `int a = 2;`

- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `a` —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ **—Å—Ç–µ–∫–µ (Stack)**.

- –í –Ω–µ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `2`.

``` csharp
–°—Ç–µ–∫ (Stack): [–∞–¥—Ä–µ—Å 001] -> –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `a` = 2
```

### 2. `Foo(ref a);`

- –ú—ã –ø–µ—Ä–µ–¥–∞—ë–º –Ω–µ –ø—Ä–æ—Å—Ç–æ **–∑–Ω–∞—á–µ–Ω–∏–µ**, –∞ **—Å—Å—ã–ª–∫—É –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `a` –≤ `Main`**.

- –¢–µ–ø–µ—Ä—å –º–µ—Ç–æ–¥ `Foo` **–ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–π —Å–∞–º–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π**, –∞ –Ω–µ –∫ –µ—ë –∫–æ–ø–∏–∏.

### 3. –í –º–µ—Ç–æ–¥–µ `Foo`:

```csharp
a = -5;
```

- –ó–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π **`a` –∏–∑ `Main`** –Ω–∞–ø—Ä—è–º—É—é –∏–∑–º–µ–Ω—è–µ—Ç—Å—è.

- –≠—Ç–æ **—Ä–µ–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**, –Ω–µ –∫–æ–ø–∏—è!



```csharp
–°—Ç–µ–∫: [–∞–¥—Ä–µ—Å 001] -> –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `a` = -5   // –∏–∑–º–µ–Ω–µ–Ω–æ –≤–Ω—É—Ç—Ä–∏ Foo
```

### 4. –í–æ–∑–≤—Ä–∞—Ç –≤ `Main`:

```csharp
Console.WriteLine(a);
```

- –ê —Ç–µ–ø–µ—Ä—å `a = -5`, –ø–æ—Ç–æ–º—É —á—Ç–æ **Foo –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª –æ—Ä–∏–≥–∏–Ω–∞–ª**.

## –ü—Ä–∏–º–µ—Ä: –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤—É `null` —Å –∏ –±–µ–∑ `ref` 


### **–ë–µ–∑ `ref`**

```csharp
using System;

class Program
{
    static void Main()
    {
        int[] numbers = new int[] { 1, 2, 3 };
        SetArrayToNull(numbers);
        Console.WriteLine(numbers == null); // ‚ùå –í—ã–≤–µ–¥–µ—Ç False
    }

    static void SetArrayToNull(int[] arr)
    {
        arr = null; // –ò–∑–º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é
    }
}

```

> –ó–¥–µ—Å—å `arr = null` –æ–±–Ω—É–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é** –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `arr`, –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤ `Main` –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.

### –° `ref`

```csharp
using System;

class Program
{
    static void Main()
    {
        int[] numbers = new int[] { 1, 2, 3 };
        SetArrayToNull(ref numbers);
        Console.WriteLine(numbers == null); // ‚úÖ –í—ã–≤–µ–¥–µ—Ç True
    }

    static void SetArrayToNull(ref int[] arr)
    {
        arr = null; // –ú–µ–Ω—è–µ—Ç —Å–∞–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –ø–æ —Å—Å—ã–ª–∫–µ
    }
}

```

> –ó–¥–µ—Å—å `arr = null` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `numbers` –≤ `null`.

| –ë–µ–∑ `ref`                               | –° `ref`                         |
| --------------------------------------- | ------------------------------- |
| –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–æ–ø–∏—è –∑–Ω–∞—á–µ–Ω–∏—è               | –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é |
| –ú–µ—Ç–æ–¥ –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å–∞–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é | –ú–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é |
| –ù–µ –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º | –ù—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ  |


### üß† 2. –°—Å—ã–ª–æ—á–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`ref locals`)

–°—Å—ã–ª–æ—á–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç **—Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–æ–≤ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä** –ø—Ä—è–º–æ –≤ —Ç–µ–ª–µ –º–µ—Ç–æ–¥–∞, –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.

---

#### üß™ –ü—Ä–∏–º–µ—Ä: —Å—Å—ã–ª–æ—á–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

```csharp
using System;

class Program
{
    static void Main()
    {
        int[] numbers = { 1, 2, 3 };
        
        // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞
        ref int second = ref numbers[1];
        second = 99;

        Console.WriteLine(string.Join(", ", numbers)); // ‚úÖ 1, 99, 3
    }
}

```


> `ref int second = ref numbers[1];` —Å–æ–∑–¥–∞—ë—Ç **—Å—Å—ã–ª–∫—É –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞**, –∞ –Ω–µ –µ–≥–æ –∫–æ–ø–∏—é. –ò–∑–º–µ–Ω–µ–Ω–∏–µ `second` –∏–∑–º–µ–Ω—è–µ—Ç –º–∞—Å—Å–∏–≤.